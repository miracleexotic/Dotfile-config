- name: "starship]-[Get zsh path"
  shell: which zsh
  args:
    executable: /bin/bash
  register: zsh
- name: "----"
  debug:
    msg: "Executable: {{ zsh.stdout }}"

- name: "starship]-[Verify Starship"
  shell: echo $(which starship)
  args:
    executable: "{{ zsh.stdout }}"
  register: result
- name: "starship]-[Install Starship"
  shell: curl -sS https://starship.rs/install.sh | sh -s -- -y
  args:
    chdir: /home/{{ user }}
    executable: "{{ zsh.stdout }}"
  when: result.stdout.find('not found') != -1
  register: result
- name: "----"
  debug:
    var: result

- name: "starship]-[Verify ~/.config folder"
  stat:
    path: /home/{{ user }}/.config
  register: result
- name: "starship]-[Create ~/.config folder"
  become_user: "{{ user }}"
  file:
    path: /home/{{ user }}/.config
    state: directory
  when: not result.stat.exists
  register: result
- name: "----"
  debug:
    msg: "{% if result.changed == true %}Created ~/.config folder{% else %}Folder ~/.config is exists{% endif %}"

- name: "starship]-[Link starship.toml file"
  shell: ln -sf /home/{{ user }}/Dotfile-config/starship/starship.toml /home/{{ user }}/.config/starship.toml
  args:
    chdir: /home/{{ user }}
  register: result
