- name: "| zsh | Install require library"
  apt:
    pkg:
      - build-essential
      - gcc
      - cmake
      - zsh
      - bat
      - fzf
      - tree
      - btop
    update_cache: yes

- name: "| zsh | Get zsh path"
  shell: which zsh
  args:
    executable: /bin/bash
  register: zsh

- name: "| zsh | Change user shell to zsh"
  user:
    name: "{{ user }}"
    shell: "{{ zsh.stdout }}"

- name: "| zsh | Install Rust cargo"
  shell: curl https://sh.rustup.rs -sSf | sh -s -- -y
  args:
    chdir: /home/{{ user }}
    executable: "{{ zsh.stdout }}"

- name: "| zsh | source cargo"
  shell: source /home/{{ user }}/.cargo/env
  args:
    chdir: /home/{{ user }}
    executable: "{{ zsh.stdout }}"

- name: "| zsh | Install exa via cargo"
  shell: cargo install exa
  args:
    executable: "{{ zsh.stdout }}"

- name: "| zsh | Git Clone enhancd"
  git:
    repo: 'https://github.com/b4b4r07/enhancd'
    dest: "/home/{{ user }}/enhancd"

- name: "| zsh | source enhancd"
  shell: source /home/{{ user }}/enhancd/init.sh
  args:
    chdir: /home/{{ user }}
    executable: "{{ zsh.stdout }}"

- name: "| zsh | Copy .zshrc file"
  copy:
    src: /home/{{ user }}/Dotfile-config/zsh/.zshrc 
    dest: /home/{{ user }}/.zshrc


